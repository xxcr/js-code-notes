# 单例模式

## 什么是单例模式

1. 定义：它保证一个类仅有一个实例，并提供一个访问它的全局访问点。

2. 单例模式是创建型设计模式的一种。针对全局仅需一个对象的场景，如线程池、全局缓存、window 对象等

3. 也许你对单例模式的概念感到模糊或者不清楚，但是其实在日常的开发中你肯定用到过单例模式

## 全局对象--最简单的单例模式

1. 单例模式的特点是 “唯一” 和 “全局访问”，那么我们可以联想到JavaScript中的全局对象，利用ES6的let不允许重复声明的特性，刚好符合这两个特点；是的，全局对象是最简单的单例模式。

    ```js
    
    let person = {
      name: "xuxu",
      getName: function () {}
    }
    
    ```
    
    person 就是一个单例，因为person 刚好就符合单例模式的两大特点："唯一"和"可全局访问"。

2. 但我们不建议这么实现单例，因为全局对象会有一些弊端：

-   污染命名空间（容易变量名冲突）
-   维护时不容易管控 (搞不好就直接覆盖了)

## 实现方式

我们每次调用new的时候，都会生成一个新的实例对象，每个实例对象之间是完全独立的。

### 




















## 适用场景

__单例模式的特点，意图解决：维护一个全局实例对象。__ 所以使用场景有：

-   引用第三方库（多次引用只会使用一个库引用，如 jQuery）
-   弹窗（登录框，信息提升框）
-   购物车 (一个用户只有一个购物车)
-   全局态管理 store (Vuex / Redux)
-   ......

下面介绍两种单例：*引用第三方库* 和 *Vuex*

项目中引入第三方库时，重复多次加载库文件时，全局只会实例化一个库对象，如 jQuery，lodash，moment ..., 其实它们的实现理念也是单例模式应用的一种：
// 引入代码库 jQuery (库别名）
if (window.jQuery != null) {
  return window.jQuery;    // 直接返回
} else {
  window.jQuery = '...';   // 初始化
}
复制代码优缺点

优点：适用于单一对象，只生成一个对象实例，避免频繁创建和销毁实例，减少内存占用。
缺点：不适用动态扩展对象，或需创建多个相似对象的场景。

TIPS: 多线程编程语言中，单例模式会涉及同步锁的问题。而 JavaScript 是单线程的编程语言，暂可忽略该问题。


## 参考文献

1. [「中高级前端面试」手写代码合集(二)](https://juejin.cn/post/6904079136299024398/)
2. [JavaScript 设计模式（一）：单例模式](https://juejin.cn/post/6844903874210299912#heading-2)
3. [JavaScript设计模式第1篇：单例模式](https://cloud.tencent.com/developer/article/1544760)
4. [JavaScript 单例模式](https://www.w3cschool.cn/zobyhd/tqlv9ozt.html)
